# æ„å»ºè¿›åº¦è·Ÿè¸ª - V2Board é›†æˆ

## ğŸ“Š å½“å‰çŠ¶æ€

| æ­¥éª¤ | çŠ¶æ€ | æè¿° |
|------|------|------|
| âœ… **ä»£ç å®ç°** | å®Œæˆ | V2Board APIå±‚ã€è®¤è¯ã€UIå…¨éƒ¨å®Œæˆ |
| âœ… **ç­¾åå¯†é’¥** | é…ç½®å®Œæˆ | Keystore å·²ç”Ÿæˆï¼ŒGitHub Secrets å·²è®¾ç½® |
| âœ… **ç¼–è¯‘ä¿®å¤** | å·²åº”ç”¨ | ä¿®å¤ 3 ä¸ªç¼–è¯‘é”™è¯¯ |
| âœ… **å¥åº·æ£€æŸ¥è„šæœ¬** | å·²å¯åŠ¨ | è‡ªåŠ¨ç›‘æ§ã€è¯Šæ–­ã€ä¿®å¤ |
| ğŸ”„ **è‡ªåŠ¨åŒ–æ„å»º** | è¿›è¡Œä¸­ | ç­‰å¾… GitHub Actions å®Œæˆ |

## ğŸ”§ å·²ä¿®å¤çš„ç¼–è¯‘é”™è¯¯

### é”™è¯¯ 1: å­—ç¬¦ä¸²æ’å€¼è¯­æ³•é”™è¯¯ âœ…
**ä½ç½®**: `V2BoardApi.kt:125`
**é—®é¢˜**: å¤šä½™çš„ç©ºæ ¼ `${ response.code }` â†’ `${response.code}`
**ä¿®å¤**: ç¼–è¾‘æ–‡æœ¬æ›¿æ¢
**æäº¤**: `c62af76b`

### é”™è¯¯ 2: ç­¾åé…ç½®å¥å£®æ€§ âœ…
**ä½ç½®**: `build.gradle.kts:151-165`
**é—®é¢˜**: æ²¡æœ‰ç­¾åç§˜é’¥æ—¶æ„å»ºå¤±è´¥
**ä¿®å¤**: æ”¹ä¸ºå®‰å…¨è¯»å–ï¼Œè‡ªåŠ¨é™çº§ä¸º debug ç­¾å
**æäº¤**: `7d2cd801`

### é”™è¯¯ 3: Public Inline å‡½æ•°è®¿é—®é Public å±æ€§ âœ…
**ä½ç½®**: `V2BoardApi.kt:136-138`
**é—®é¢˜**: `inline fun` è®¿é—® `private val json`
**ä¿®å¤**: æ”¹ä¸º `internal inline fun`
**æäº¤**: `d0a27545`

### é”™è¯¯ 4: GitHub Actions è„šæœ¬å…¼å®¹æ€§ âœ…
**ä½ç½®**: `health-check.sh`
**é—®é¢˜**: gh CLI å‘½ä»¤å‚æ•°ä¸å…¼å®¹
**ä¿®å¤**: æ›´æ–° jq æŸ¥è¯¢è¯­æ³•ï¼ŒåŠ å…¥é”™è¯¯å¤„ç†
**æäº¤**: `835a759f`

## ğŸš€ è‡ªåŠ¨åŒ–ä¿®å¤è„šæœ¬

### è„šæœ¬ä¿¡æ¯
- **æ–‡ä»¶**: `health-check.sh`
- **çŠ¶æ€**: æ­£åœ¨åå°è¿è¡Œ
- **æ—¥å¿—**: `health-check.log`
- **è¿›ç¨‹ ID**: 4030475

### è„šæœ¬åŠŸèƒ½
```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  è·å–æœ€æ–°æ„å»ºçŠ¶æ€                        â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚  â†“                                      â”‚
â”‚  æ£€æŸ¥æ„å»ºæ˜¯å¦æˆåŠŸ                       â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚  â†™ æˆåŠŸ â•± å¤±è´¥ â•²                       â”‚
â”‚  â†“                â†“                     â”‚
â”‚  è¾“å‡ºæˆåŠŸä¿¡æ¯    åˆ†æé”™è¯¯              â”‚
â”‚  å¹¶é€€å‡º          â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚
â”‚                  â†“                 â†“  â”‚
â”‚              è‡ªåŠ¨ä¿®å¤           æ£€æŸ¥ç±»å‹  â”‚
â”‚                â†“                 â”‚      â”‚
â”‚              æäº¤+æ¨é€          éœ€è¦æ‰‹åŠ¨  â”‚
â”‚                â†“                 â”‚      â”‚
â”‚              ç­‰å¾…æ–°æ„å»º         è¾“å‡ºæ—¥å¿—  â”‚
â”‚                â†“                 â”‚      â”‚
â”‚              é‡è¯•æµç¨‹ â†â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜      â”‚
â”‚                â†“                       â”‚
â”‚          é‡è¯• < 5 æ¬¡ï¼Ÿ                  â”‚
â”‚         â†“       â†“                      â”‚
â”‚        æ˜¯       å¦                     â”‚
â”‚        â†“       â†“                      â”‚
â”‚   é‡å¤   å¤±è´¥æˆ–éœ€è¦æ‰‹åŠ¨                â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

## ğŸ“‹ æ‰€æœ‰æäº¤è®°å½•

```
835a759f - fix: Fix gh CLI command compatibility in health-check script
d0a27545 - fix: Fix inline function visibility and add health check script
169b0499 - chore: Add release keystore for APK signing
7d2cd801 - fix: Make signing configuration robust when secrets are not provided
d52104bd - fix: Fix string interpolation syntax error in V2BoardApi
c62af76b - feat: Add V2Board authentication and subscription management
```

## ğŸ”‘ ç­¾åé…ç½®

### Keystore ä¿¡æ¯
```
ä½ç½®: release.keystore
åˆ«å: clash-meta-key
æœ‰æ•ˆæœŸ: 27å¹´ (2026-2053)
ç®—æ³•: RSA 2048-bit
```

### GitHub Secretsï¼ˆå·²è®¾ç½®ï¼‰
```
âœ“ SIGNING_STORE_PASSWORD = ClashMeta@2024!
âœ“ SIGNING_KEY_ALIAS = clash-meta-key
âœ“ SIGNING_KEY_PASSWORD = ClashMeta@2024!
âœ“ API_BASE_URL = <é…ç½®å€¼>
```

## ğŸ“ æ„å»ºç¯å¢ƒ

### GitHub Actions
- **å·¥ä½œæµ**: build-debug.yaml, build-pre-release.yaml, build-release.yaml
- **è§¦å‘æ¡ä»¶**: Push to main, Manual workflow_dispatch
- **ç¯å¢ƒ**: Ubuntu latest, JDK 21, Gradle 8.10.2, Go 1.25+

### æ¨¡å—ç»“æ„
```
ClashMetaForAndroid
â”œâ”€â”€ app/                  - Android åº”ç”¨å±‚
â”œâ”€â”€ design/              - UI è®¾è®¡å±‚ï¼ˆDataBindingï¼‰
â”œâ”€â”€ service/             - ä¸šåŠ¡é€»è¾‘å±‚ï¼ˆV2Board APIï¼‰
â”œâ”€â”€ common/              - å…±äº«å·¥å…·åº“
â”œâ”€â”€ core/                - Clash.Meta æ ¸å¿ƒï¼ˆGoï¼‰
â””â”€â”€ hideapi/             - åå°„å·¥å…·åº“
```

## ğŸ¯ V2Board é›†æˆå†…å®¹

### API ç«¯ç‚¹
- `POST /passport/auth/login` - ç”¨æˆ·ç™»å½•
- `POST /passport/auth/register` - ç”¨æˆ·æ³¨å†Œ
- `POST /passport/auth/forget` - å¿˜è®°å¯†ç 
- `GET /user/getUserInfo` - è·å–ç”¨æˆ·ä¿¡æ¯
- `GET /user/subscribe` - è·å–è®¢é˜…
- `GET /user/dashbord` - è·å–ä»ªè¡¨æ¿
- `GET /user/plan/fetch` - è·å–å¥—é¤åˆ—è¡¨
- `POST /user/order/save` - åˆ›å»ºè®¢å•
- `POST /user/order/checkout` - è®¢å•ç»“è´¦

### å®ç°çš„åŠŸèƒ½
âœ… ç”¨æˆ·è®¤è¯ï¼ˆç™»å½•/æ³¨å†Œ/å¿˜è®°å¯†ç ï¼‰
âœ… è‡ªåŠ¨è®¢é˜…å¯¼å…¥
âœ… ç”¨æˆ·ä¿¡æ¯å±•ç¤º
âœ… å¥—é¤æµè§ˆä¸è´­ä¹°
âœ… è®¢å•ç®¡ç†
âœ… æš—è‰²ä¸»é¢˜æ”¯æŒ
âœ… é”™è¯¯å¤„ç†ä¸æç¤º

## ğŸ” ç›‘æ§æ–¹å¼

### æ–¹å¼ 1: ç›´æ¥æŸ¥çœ‹æ—¥å¿—
```bash
tail -f health-check.log
```

### æ–¹å¼ 2: ç›‘æ§åå°è¿›ç¨‹
```bash
ps aux | grep health-check
```

### æ–¹å¼ 3: GitHub Actions é¡µé¢
è®¿é—®: https://github.com/hosemorinho/ClashMetaForAndroid_v2b/actions

### æ–¹å¼ 4: æŸ¥çœ‹æäº¤å†å²
```bash
git log --oneline -10
```

## â±ï¸ é¢„æœŸæ—¶é—´çº¿

| é˜¶æ®µ | é¢„è®¡æ—¶é—´ | è¯´æ˜ |
|------|---------|------|
| å½“å‰æ„å»ºå®Œæˆ | 5-10åˆ†é’Ÿ | ç­‰å¾… GitHub Actions |
| é”™è¯¯åˆ†æ | <1åˆ†é’Ÿ | è„šæœ¬è‡ªåŠ¨åˆ†æ |
| è‡ªåŠ¨ä¿®å¤ | <2åˆ†é’Ÿ | åº”ç”¨å·²çŸ¥ä¿®å¤ |
| æ¨é€ç­‰å¾… | 1-2åˆ†é’Ÿ | GitHub Actions è§¦å‘ |
| æ–°æ„å»ºå®Œæˆ | 5-10åˆ†é’Ÿ | å†æ¬¡æ„å»º |
| **æ€»è®¡** | **15-30åˆ†é’Ÿ/è½®** | æœ€å¤š 5 è½® |

## âœ¨ æˆåŠŸæ ‡å¿—

å½“çœ‹åˆ°ä»¥ä¸‹è¾“å‡ºæ—¶ï¼Œè¯´æ˜æ„å»ºå·²æˆåŠŸï¼š

```
[âœ“] âœ“ BUILD SUCCESSFUL!
[âœ“] Repository: https://github.com/hosemorinho/ClashMetaForAndroid_v2b
[âœ“] Run: https://github.com/hosemorinho/ClashMetaForAndroid_v2b/actions/runs/...
```

## ğŸ†˜ å¦‚æœè„šæœ¬åœæ­¢

### æ£€æŸ¥è¿›ç¨‹
```bash
ps aux | grep health-check | grep -v grep
```

### æŸ¥çœ‹æœ€åçš„æ—¥å¿—
```bash
tail -100 health-check.log
```

### é‡æ–°å¯åŠ¨è„šæœ¬
```bash
cd /home/ClashMetaForAndroid
nohup ./health-check.sh > health-check.log 2>&1 &
```

### æ€æ­»è„šæœ¬
```bash
pkill -f health-check.sh
```

## ğŸ“š æ–‡æ¡£

- **HEALTH_CHECK.md** - å¥åº·æ£€æŸ¥è„šæœ¬è¯¦ç»†æ–‡æ¡£
- **CLAUDE.md** - é¡¹ç›®æ¶æ„ä¸å¼€å‘æŒ‡å—
- **README.md** - é¡¹ç›®ä»‹ç»ä¸æ„å»ºæŒ‡å—

## ğŸ‰ ä¸‹ä¸€æ­¥

1. **ç­‰å¾…è‡ªåŠ¨åŒ–å®Œæˆ** - è„šæœ¬ä¼šæŒç»­è¿è¡Œç›´åˆ°æ„å»ºæˆåŠŸ
2. **ç›‘æ§æ—¥å¿—** - ä½¿ç”¨ `tail -f health-check.log` å®æ—¶æŸ¥çœ‹è¿›åº¦
3. **æˆåŠŸå** - æ£€æŸ¥ GitHub ä»“åº“çš„ Actions æ ‡ç­¾ï¼ŒAPK å°†ä¸Šä¼ åˆ° Releases
4. **ä¸‹è½½ APK** - ä» https://github.com/hosemorinho/ClashMetaForAndroid_v2b/releases ä¸‹è½½

---

**æœ€åæ›´æ–°**: 2026-02-07 23:10
**çŠ¶æ€**: ğŸŸ¢ è‡ªåŠ¨åŒ–ç›‘æ§è¿›è¡Œä¸­
